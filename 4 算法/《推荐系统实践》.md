# 序

初识项亮是在2009年，当时项亮还是中国科学院的一名博士研究生，一方面积极参与Netflix和其他推荐系统比赛并取得了漂亮的成绩，一方面积极参与组织了recsys学术会议。作为一个有很多业界公司支持的学术交流活动，recsys在建立之初就吸引了很多同学和工程师。项亮毕业后进入Hulu公司，开始了工业级别推荐系统的开发工作，并一如既往的注意学习、总结和分享。

——王益

腾讯公司情境广告中心总监

# 前言

为了使本书同时适合工程师和在校学生阅读，本书在写作中同时使用了两种介绍方法。一种是利用公式，这样方便有一些理论基础的同学很快明白算法的含义。另一种是利用代码，这样可以方便工程师迅速了解算法的含义。不过因为本人是学生出身，工程经验不是特别足，所以有些代码写得不是那么完美，还请工程师们海涵。



# 第1章 好的推荐系统 

## 1 什么是推荐系统

众所周知，为了解决信息过载的问题，已经有无数科学家和工程师提出了很多天才的解决方案，其中代表性的解决方案是分类目录和搜索引擎。而这两种解决方案分别催生了互联网领域的两家著名公司——雅虎和谷歌。

以看电影为例，我们可能用如下方式决定最终看什么电影：

- 社会化推荐（social recommendation）：让好友给自己推荐。
- 基于内容推荐（content-based fitering）：通过分析用户曾经看过的电影找到用户喜欢的演员和导演，然后给用户推荐这些演员或者导演的其他电影。
- 基于协同过滤（collaborative filtering）：找到和自己历史观看兴趣相似的一群用户，看看他们最近在看什么电影，那么结果可能比宽泛的热门排行榜更能符合自己的兴趣。

## 2 个性化推荐系统的应用 

2.1 电子商务 
2.2 电影和视频网站 
2.3 个性化音乐网络电台 
2.4 社交网络 
2.5 个性化阅读 
2.6 基于位置的服务 
2.7 个性化邮件 
2.8 个性化广告 

## 3 推荐系统评测 

在推荐系统的早期研究中，很多人将好的推荐系统定义为能够作出准确预测的推荐系统。比如，一个图书推荐系统预测一个用户将来会购买《C++ Primer中文版》这本书，而用户后来确实购买了，那么这就被看做一次准确的预测。

预测准确度是推荐系统领域的重要指标（没有之一）。这个指标的好处是，它可以比较容易地通过离线方式计算出来，从而方便研究人员快速评价和选择不同的推荐算法。

但是，很多研究表明，准确的预测并不代表好的推荐。

好的推荐系统不仅仅能够准确预测用户的行为，而且能够扩展用户的视野，帮助用户发现那些他们可能会感兴趣，但却不那么容易发现的东西。

### 3.1 推荐系统实验方法 

#### 离线实验



#### 用户调查

离线实验的指标和实际的商业指标存在差距，比如预测准确率和用户满意度之间就存在很大差别，高预测准确率不等于高用户满意度。因此，如果要准确评测一个算法，需要相对比较真实的环境。最好的方法就是将算法直接上线测试，但在对算法会不会降低用户满意度不太有把握的情况下，上线测试具有较高的风险，所以以上线测试前一般需要做一次称为用户调查的测试。

#### 在线实验

在完成离线实验和必要的用户调查后，可以将推荐系统上线做AB测试，将它和旧的算法进行比较。

### 3.2 评测指标 

1. 用户满意度
2. 预测准确度
3. 覆盖率
4. 多样性
5. 新颖性
6. 惊喜度
7. 信任度
8. 实时性
9. 健壮性
10. 商业目标

### 3.3 评测维度

- 用户维度
- 物品维度
- 时间维度

# 第2章 利用用户行为数据 

## 1 用户行为数据简介 

## 2 用户行为分析 

2.1 用户活跃度和物品流行度的分布 
2.2 用户活跃度和物品流行度的关系 

## 3 实验设计和算法评测 

3.1 数据集 
3.2 实验设计 
3.3 评测指标 

## 4 基于邻域的算法 

4.1 基于用户的协同过滤算法 
4.2 基于物品的协同过滤算法 
4.3 UserCF和ItemCF的综合比较 

## 5 隐语义模型 

5.1 基础算法 
5.2 基于LFM的实际系统的例子 
5.3 LFM和基于邻域的方法的比较 

## 6 基于图的模型 

6.1 用户行为数据的二分图表示 
6.2 基于图的推荐算法 

# 第3章 推荐系统冷启动问题 

1 冷启动问题简介 
2 利用用户注册信息 
3 选择合适的物品启动用户的兴趣 
4 利用物品的内容信息 
5 发挥专家的作用 

# 第4章 利用用户标签数据 

## 1 UGC标签系统的代表应用 

1.1 Delicious 
1.2 CiteULike 
1.3 Last.fm 
1.4 豆瓣 
1.5 Hulu 

## 2 标签系统中的推荐问题 

2.1 用户为什么进行标注 
2.2 用户如何打标签 
2.3 用户打什么样的标签 

## 3 基于标签的推荐系统 

3.1 实验设置 
3.2 一个最简单的算法 
3.3 算法的改进 
3.4 基于图的推荐算法 
3.5 基于标签的推荐解释 

## 4 给用户推荐标签 

4.1 为什么要给用户推荐标签 
4.2 如何给用户推荐标签 
4.3 实验设置 
4.4 基于图的标签推荐算法 
5 扩展阅读 

# 第5章 利用上下文信息 

## 1 时间上下文信息 

1.1 时间效应简介 
1.2 时间效应举例 
1.3 系统时间特性的分析 
1.4 推荐系统的实时性 
1.5 推荐算法的时间多样性 
1.6 时间上下文推荐算法 
1.7 时间段图模型 
1.8 离线实验 

## 2 地点上下文信息 

3 扩展阅读 

# 第6章 利用社交网络数据 

## 1 获取社交网络数据的途径 

1.1 电子邮件 
1.2 用户注册信息 
1.3 用户的位置数据 
1.4 论坛和讨论组 
1.5 即时聊天工具 
1.6 社交网站 

## 2 社交网络数据简介  148社交网络数据中的长尾分布 

## 3 基于社交网络的推荐 

3.1 基于邻域的社会化推荐算法 
3.2 基于图的社会化推荐算法 
3.3 实际系统中的社会化推荐算法 
3.4 社会化推荐系统和协同过滤推荐系统 
3.5 信息流推荐 

## 4 给用户推荐好友 

4.1 基于内容的匹配 
4.2 基于共同兴趣的好友推荐 
4.3 基于社交网络图的好友推荐 
4.4 基于用户调查的好友推荐算法对比 
5 扩展阅读 

# 第7章 推荐系统实例 

## 1 外围架构 

## 2 推荐系统架构 

## 3 推荐引擎的架构 

3.1 生成用户特征向量 
3.2 特征?物品相关推荐 
3.3 过滤模块 
3.4 排名模块 
4 扩展阅读 

# 第8章 评分预测问题 

## 1 离线实验方法 

## 2 评分预测算法 

2.1 平均值 
2.2 基于邻域的方法 
2.3 隐语义模型与矩阵分解模型 
2.4 加入时间信息 
2.5 模型融合 
2.6 Netflix Prize的相关实验结果 